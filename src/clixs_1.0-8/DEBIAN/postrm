#!/bin/bash

function main(){
	date | tag "$@"

	local ROOT='/usr/local/share'
	local REPO='clixs'
	local GIT='michaelsalisbury'

	case "$1" in
		remove)
			tag "$@" <<< "Listing \"${ROOT}/${REPO}\""
			#ls -l "${ROOT}/${REPO}/"
			#ls -l "${ROOT}/${REPO}/bin"
			ls -R "${ROOT}/${REPO}" |
			sed '/^total /d;/^$/d;/:$/!{s/^/   /}' |
			scroll
			tag "$@" <<< "Removing \"${ROOT}/${REPO}\""
			#echo hi
			#rm -rfv "${ROOT}/${REPO}/"{bin,doc,.git,lib,tmp}
			#rm -rfv "${ROOT}/${REPO}/{bin,doc,.git,lib,tmp}" | scroll

		;;
		upgrade)
			echo -n

		;;
		purge)
			tag "$@" <<< "Listing \"${ROOT}/${REPO}\""
			ls -R "${ROOT}/${REPO}" |
			sed '/^total /d;/^$/d;/:$/!{s/^/   /}' |
			scroll
			tag "$@" <<< "Purging \"${ROOT}/${REPO}\""
			rm -rf "${ROOT}/${REPO}"

		;;
		failed-upgrade|abort-install|abort-upgrade|disappear)
			echo -n

		;;
		*)
			tag "$@" <<< "Called with unknown argument"
			exit 0

		;;
	esac
}
function tag(){
	local TAG="<$(basename "$0")> $1 ::"
	sed "s/^/${TAG} /"
}
function scroll(){
	if [ -x "${ROOT}/${REPO}/bin/${FUNCNAME}.sh" ]; then
		"${ROOT}/${REPO}/bin/${FUNCNAME}.sh" "$@"
	else
		cat
	fi
}
function enclose(){
	if [ -x "${ROOT}/${REPO}/bin/${FUNCNAME}.sh" ]; then
		"${ROOT}/${REPO}/bin/${FUNCNAME}.sh" "$@"
	else
		cat
	fi
}
main "$@"
